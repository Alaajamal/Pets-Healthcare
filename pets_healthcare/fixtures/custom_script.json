[
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "Sales Order",
  "modified": "2021-03-06 14:51:27.329660",
  "name": "Sales Order-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Sales Order', {\n\trefresh(frm) {\n\t\t$('[data-label=\"Update%20Items\"]').hide();\n\t}\n})"
 },
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "Landed Cost Voucher",
  "modified": "2021-03-31 11:43:28.384170",
  "name": "Landed Cost Voucher-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Landed Cost Voucher', {\n\treset_cost_center: function(frm) {\n\t    if(frm.doc.cost_center){\n             $.each(frm.doc.items,  function(i,d) {\n                 console.log(d.cost_center);\n                 console.log(isEmpty(d.cost_center));\n                        if(isEmpty(d.cost_center))\n                        {\n                            d.cost_center =  frm.doc.cost_center;\n                        }\n                    });\n            cur_frm.refresh();\n    \t    }\n    }\n})\nfunction isEmpty(value){\n  return (value === null || value === ''||typeof value === 'undefined');\n}"
 },
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "Sales Invoice",
  "modified": "2021-05-10 15:45:14.709488",
  "name": "Sales Invoice-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Sales Invoice', {\n\tvalidate:function(frm) {\n\t    if (frm.doc.is_return && frm.doc.write_off_amount == 0 ){\n                \n                frappe.db.get_value(\n\t\t\t\t\t\"Sales Invoice\",\n\t\t\t\t\tfrm.doc.return_against,\n\t\t\t\t\t\"loyalty_amount\",\n\t\t\t\t\t(r) => {\n\t\t\t\t\t\tif(r.loyalty_amount >0 && !frm.doc.write_off_amount)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t    frm.set_value(\"write_off_amount\",-1*r.loyalty_amount );\n\t\t\t\t\t\t    frm.save();\n\t\t\t\t\t\t    console.log(\"HIT Mad\")\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\n        }\n\n\n\t}\n})"
 },
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "Patient",
  "modified": "2021-05-16 10:45:28.497429",
  "name": "Patient-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "cur_frm.add_fetch('pet_owner',  'email',  'email');\ncur_frm.add_fetch('pet_owner',  'phone',  'phone');\n\nfrappe.ui.form.on('Patient', {\n\trefresh(frm) {\n\t\t// your code here\n\t}\n})"
 },
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "Salary Structure",
  "modified": "2020-07-02 13:48:37.039527",
  "name": "Salary Structure-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Salary Structure', {\n\tonload: function(frm) {\n\t    var total = 0;\n        $.each(frm.doc.earnings || [], function (i, d) {\n            if(d.amount){\n                total += flt(d.amount);\n            }\n        });\n        frm.set_value(\"total_amount\", total);\n        \n\t    if (frm.doc.__islocal){\n\t        frappe.call({\n\t\t\t\tmethod:'customizer.utils.get_salary_components',\n\t\t\t\tfreeze: true,\n\t\t\t\tcallback: function(r){\n\t\t\t\t    console.log(r.message);\n\t\t\t\t    (r.message || []).forEach((d) => {\n    \t\t\t\t\tif (d.type==\"Earning\") {\n    \t\t\t\t\t    let e_row = frm.add_child('earnings');\n    \t\t\t\t\t    e_row.salary_component = d.name;\n    \t\t\t\t\t    e_row.amount = d.amount;\n    \t\t\t\t\t    e_row.abbr = d.salary_component_abbr;\n    \t\t\t\t\t    frm.script_manager.trigger(\"salary_component\", e_row.doctype, e_row.name);\n    \t\t\t\t\t}\n    \t\t\t\t\trefresh_field(\"earnings\");\n    \t\t\t\t\tif (d.type==\"Deduction\") {\n    \t\t\t\t\t    let d_row = frm.add_child('deductions');\n    \t\t\t\t\t    d_row.salary_component = d.name;\n    \t\t\t\t\t    d_row.amount = d.amount;\n    \t\t\t\t\t    d_row.abbr = d.salary_component_abbr;\n    \t\t\t\t\t    frm.script_manager.trigger(\"salary_component\", d_row.doctype, d_row.name);\n    \t\t\t\t\t}\n    \t\t\t\t\trefresh_field(\"deductions\");\n    \t\t\t\t});\n    \t\t\t\t\n\t\t\t\t}\n\t\t\t});\n\t    }\n\t},\n\trefresh: function(frm){\n\t    if(frm.doc.docstatus == 1 && frm.doc.is_active == \"Yes\"){\n\t\t\tfrm.add_custom_button(__(\"Disable Employee Salary\"), function() {\n\t\t\t\tfrappe.call({\n\t\t\t\tmethod: \"customizer.utils.disable_employee_salary\",\n\t\t\t\tfreeze: true,\n\t\t\t\targs:{\n\t\t\t\t\tdocname: frm.doc.name,\n\t\t\t\t},\n\t\t\t\tcallback: function (r) {\n\n\t\t\t\t\t\tfrm.reload_doc();\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\tif(frm.doc.docstatus == 1 && frm.doc.is_active == \"No\"){\n\t\t\tfrm.add_custom_button(__(\"Enable Employee Salary\"), function() {\n\t\t\t\tfrappe.call({\n\t\t\t\tmethod: \"customizer.utils.enable_employee_salary\",\n\t\t\t\tfreeze: true,\n\t\t\t\targs:{\n\t\t\t\t\tdocname: frm.doc.name,\n\t\t\t\t},\n\t\t\t\tcallback: function (r) {\n\n\t\t\t\t\t\tfrm.reload_doc();\n\n\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n        // frm.set_df_property(\"total_earning\", \"allow_on_submit\", 1);\n        // frm.set_df_property(\"total_deduction\", \"allow_on_submit\", 1);\n\t    if(frm.doc.docstatus == 1){\n\t        cur_frm.fields_dict['total_earning'].df.allow_on_submit = 1;\n\t        cur_frm.fields_dict['total_deduction'].df.allow_on_submit = 1;\n\t        frm.set_df_property(\"earnings\", \"allow_on_submit\", 1);\n\t        frm.set_df_property(\"deductions\", \"allow_on_submit\", 1);\n\t        let df = frappe.meta.get_docfield(\"Salary Detail\",\"amount\", cur_frm.doc.name);\n            df.allow_on_submit = 1;\n\t    }\n\t}\n});\n\nfrappe.ui.form.on(\"Salary Detail\", \"amount\", function (frm, cdt, cdn) {\n    var total = 0;\n    $.each(frm.doc.earnings || [], function (i, d) {\n        if(d.amount){\n            total += flt(d.amount);\n        }\n    });\n    frm.set_value(\"total_amount\", total);\n});"
 },
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "Leave Application",
  "modified": "2020-07-02 12:38:36.691328",
  "name": "Leave Application-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Leave Application', {\n\trefresh: function(frm) {\n\t   //show_visa_details(frm);\n\t\t\t\n\t},\n\ttotal_leave_days: function(frm){\n\t\tshow_visa_details(frm);\n\t}\n});\nfunction show_visa_details(frm){\n\tif (frm.doc.employee && !frm.doc.__local){\n\t\tvar one_year_in_company = frappe.datetime.add_days(frm.doc.date_of_joining, 365);\n\t\tif (frm.doc.leave_type == 'Annual Leave - \u0627\u062c\u0627\u0632\u0629 \u0627\u0639\u062a\u064a\u0627\u062f\u064a\u0629' && frm.doc.country != 'Saudi Arabia' && frm.doc.total_leave_days >= 15){\n\t\t\tfrm.set_df_property('leave_with', 'hidden', 0);\n\t\t\tfrm.set_df_property('employee_ticket_price', 'hidden', 0);\n\t\t\tfrm.set_df_property('family_member_ticket_price', 'hidden', 0);\n\t\t}\n\t\telse{\n\t\t\tfrm.set_value('leave_with', \"\");\n\t\t\tfrm.set_value('employee_ticket_price', \"\");\n\t\t\tfrm.set_value('family_member_ticket_price', \"\");\n\n\t\t\tfrm.set_df_property('leave_with', 'hidden', 1);\n\t\t\tfrm.set_df_property('employee_ticket_price', 'hidden', 1);\n\t\t\tfrm.set_df_property('family_member_ticket_price', 'hidden', 1);\n\t\t}\n\t}\n\t\n}\n\n"
 },
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "Stock Entry",
  "modified": "2020-08-24 13:51:42.510109",
  "name": "Stock Entry-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Stock Entry', {\n\trefresh(frm) {\n\t  frm.add_fetch(\"stock_entry_reason\", \"stock_adjustment_account\", \"expense_account\");\n\t    frappe.call({\n        \tmethod: \"customizer.utils.customize_stock_entry\",\n        \tcallback: (data) => {\n        \t\tconsole.log(data.message);\n        \t}\n\t\t});\n\t}\n\t,\n\tonload(frm) {\n\t  frm.add_fetch(\"stock_entry_reason\", \"stock_adjustment_account\", \"expense_account\");\n\t    frappe.call({\n        \tmethod: \"customizer.utils.customize_stock_entry\",\n        \tcallback: (data) => {\n        \t\tconsole.log(data.message);\n        \t}\n\t\t});\n\t}\n\t\n})\n"
 },
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "Stock Entry Reason",
  "modified": "2020-08-24 14:17:24.863016",
  "name": "Stock Entry Reason-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Stock Entry Reason', {\n\trefresh(frm) {\n\t\t// your code here\n\t}\n})\ncur_frm.fields_dict[\"stock_adjustment_account\"].get_query = function(doc) {\n\treturn {\n\t\tfilters: {\n\t\t\t\"report_type\": \"Profit and Loss\",\n\t\t\t\"company\": doc.company,\n\t\t\t\"is_group\": 0\n\t\t}\n\t};\n};"
 },
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "Item",
  "modified": "2020-09-08 11:49:23.120114",
  "name": "Item-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Item', {\n\trefresh(frm) {\n        if (frm.doc.has_batch_no === 0) {\n        \tfrm.add_custom_button(__('Activate Batch'), function() {\n        \t\treturn frappe.call({\n        \t\t\tmethod: \"customizer.utils.edit_is_batch\",\n        \t\t\targs: {\n        \t\t\t\tname: frm.doc.name\n        \t\t\t},\n        \t\t\tfreeze: true,\n        \t\t\tcallback: (r) => {\n        \t\t\t\tif(r.message) {\n        \t\t\t\t\tfrm.reload_doc()\n        \t\t\t\t}\n        \t\t\t}\n        \t\t});\n        \t}, __('Alter'));\n        \tfrm.page.set_inner_btn_group_as_primary(__('Alter'));\n        }\n}\n})"
 },
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "User",
  "modified": "2020-03-03 23:31:02.895621",
  "name": "User-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "let modules_view_updated = false;\nfrappe.ui.form.on('User', {\n\tstandard_modules_view(frm) {\n\t    modules_view_updated = true;\n\t},\n\tafter_save(frm){\n\t    frappe.msgprint(__(\"Refreshing System..\"));\n\t    window.location.reload();\n\t    \n\t}\n})"
 }
]